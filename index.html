<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <title>–¢–µ—Å—Ç –ø–æ –î–∏–∑–∞–π–Ω—É</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background: #f0f2f5;
      padding: 20px;
      max-width: 700px;
      margin: auto;
      transition: background 0.5s;
      position: relative;
    }
    .question {
      background: #fff;
      padding: 20px;
      border-radius: 12px;
      box-shadow: 0 4px 10px rgba(0,0,0,0.1);
      margin-bottom: 20px;
      animation: fadeIn 0.5s;
    }
    button {
      display: block;
      background: #ddd;
      border: none;
      padding: 12px 20px;
      margin: 10px 0;
      border-radius: 8px;
      font-size: 16px;
      cursor: pointer;
      width: 100%;
      transition: background-color 0.3s, transform 0.2s;
    }
    button:hover {
      background: #ccc;
    }
    button.correct {
      background: #4CAF50 !important;
      color: white;
      animation: pulse 1s infinite;
    }
    button.wrong {
      background: #f44336 !important;
      color: white;
      animation: shake 0.5s;
    }
    #timer {
      font-size: 18px;
      font-weight: bold;
      margin-bottom: 10px;
      padding: 10px;
      border-radius: 10px;
      text-align: center;
    }
    #result {
      text-align: center;
      font-size: 24px;
      margin-top: 30px;
      color: #333;
      animation: fadeIn 1s;
    }
    #progress {
      font-size: 16px;
      margin-bottom: 10px;
    }
    canvas {
      position: absolute;
      top: 0;
      left: 0;
      pointer-events: none;
      z-index: 10;
    }
    @keyframes pulse {
      0% { box-shadow: 0 0 0 0 rgba(76, 175, 80, 0.7); }
      70% { box-shadow: 0 0 10px 20px rgba(76, 175, 80, 0); }
      100% { box-shadow: 0 0 0 0 rgba(76, 175, 80, 0); }
    }
    @keyframes shake {
      0% { transform: translateX(0); }
      25% { transform: translateX(-5px); }
      50% { transform: translateX(5px); }
      75% { transform: translateX(-5px); }
      100% { transform: translateX(0); }
    }
    @keyframes blink {
      0%, 100% { background-color: #f44336; }
      50% { background-color: #fff; }
    }
  </style>
</head>
<body>

<h1>–¢–µ—Å—Ç –ø–æ –î–∏–∑–∞–π–Ω—É</h1>

<div id="progress"></div>
<div id="timer"></div>
<div id="quiz"></div>
<canvas id="fireworks"></canvas>

<audio id="alarm" src="https://www.soundjay.com/button/beep-07.wav"></audio>

<script>
let questions = [
  {
    question: "–ß—Ç–æ –¥–µ–ª–∞–µ—Ç –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç '–¢—Ä–∞–Ω—Å—Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏–µ'?",
    answers: [
      { text: "–ú–µ–Ω—è–µ—Ç —Ä–∞–∑–º–µ—Ä –∏ —Ñ–æ—Ä–º—É –æ–±—ä–µ–∫—Ç–∞", correct: true },
      { text: "–†–∞–∑–º—ã–≤–∞–µ—Ç –∫–∞—Ä—Ç–∏–Ω–∫—É", correct: false },
      { text: "–£–¥–∞–ª—è–µ—Ç —Å–ª–æ–π", correct: false },
      { text: "–ü–µ—Ä–µ–∫—Ä–∞—à–∏–≤–∞–µ—Ç –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ", correct: false },
      { text: "–°–æ–∑–¥–∞—ë—Ç –Ω–æ–≤—ã–π —Å–ª–æ–π", correct: false },
    ]
  },
  {
    question: "–ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç, –µ—Å–ª–∏ –Ω–∞–∂–∞—Ç—å –Ω–∞ –∑–∞–∫—Ä—ã—Ç—ã–π –≥–ª–∞–∑ —Å–ª–æ—è?",
    answers: [
      { text: "–°–ª–æ–π —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è –≤–∏–¥–∏–º—ã–º", correct: true },
      { text: "–°–ª–æ–π —É–¥–∞–ª—è–µ—Ç—Å—è", correct: false },
      { text: "–°–ª–æ–π –ø–µ—Ä–µ–º–µ—â–∞–µ—Ç—Å—è –Ω–∞–≤–µ—Ä—Ö", correct: false },
      { text: "–°–ª–æ–π –±–ª–æ–∫–∏—Ä—É–µ—Ç—Å—è", correct: false },
      { text: "–°–ª–æ–π —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è –ø—Ä–æ–∑—Ä–∞—á–Ω—ã–º", correct: false },
    ]
  },
  {
    question: "–ö–∞–∫ —Å–æ–∑–¥–∞—Ç—å –Ω–æ–≤—ã–π —Å–ª–æ–π?",
    answers: [
      { text: "–ù–∞–∂–∞—Ç—å –Ω–∞ –∫–Ω–æ–ø–∫—É '–°–æ–∑–¥–∞—Ç—å –Ω–æ–≤—ã–π —Å–ª–æ–π'", correct: true },
      { text: "–£–¥–∞–ª–∏—Ç—å –≤—Å–µ —Å—Ç–∞—Ä—ã–µ —Å–ª–æ–∏", correct: false },
      { text: "–í—ã–±—Ä–∞—Ç—å –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç '–õ–∞—Å—Ç–∏–∫'", correct: false },
      { text: "–û—Ç–∫—Ä—ã—Ç—å –º–µ–Ω—é —Ñ–∏–ª—å—Ç—Ä–æ–≤", correct: false },
      { text: "–ù–∞–∂–∞—Ç—å –∫–æ–º–±–∏–Ω–∞—Ü–∏—é Ctrl+S", correct: false },
    ]
  },
  {
    question: "–ö–∞–∫ —É–¥–∞–ª–∏—Ç—å —á–∞—Å—Ç—å –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è?",
    answers: [
      { text: "–í—ã–¥–µ–ª–∏—Ç—å –∏ –Ω–∞–∂–∞—Ç—å Delete", correct: true },
      { text: "–ü–æ–∫—Ä–∞—Å–∏—Ç—å –æ–±–ª–∞—Å—Ç—å –≤ –±–µ–ª—ã–π —Ü–≤–µ—Ç", correct: false },
      { text: "–°–æ–∑–¥–∞—Ç—å –Ω–æ–≤—ã–π —Å–ª–æ–π", correct: false },
      { text: "–ü–µ—Ä–µ–º–µ—Å—Ç–∏—Ç—å –∫–∞—Ä—Ç–∏–Ω–∫—É", correct: false },
      { text: "–°–æ—Ö—Ä–∞–Ω–∏—Ç—å —Ñ–∞–π–ª", correct: false },
    ]
  },
  {
    question: "–ö–∞–∫ –ø–µ—Ä–µ–º–µ—Å—Ç–∏—Ç—å —Å–ª–æ–π –≤—ã—à–µ?",
    answers: [
      { text: "–ü–µ—Ä–µ—Ç–∞—â–∏—Ç—å –µ–≥–æ –≤ –ø–∞–ª–∏—Ç—Ä–µ —Å–ª–æ—ë–≤", correct: true },
      { text: "–£–¥–∞–ª–∏—Ç—å –Ω–∏–∂–Ω–∏–π —Å–ª–æ–π", correct: false },
      { text: "–û—Ç–∫—Ä—ã—Ç—å —Ñ–∏–ª—å—Ç—Ä—ã", correct: false },
      { text: "–ò–∑–º–µ–Ω–∏—Ç—å —Ä–∞–∑–º–µ—Ä –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è", correct: false },
      { text: "–ü–æ–º–µ–Ω—è—Ç—å —Ü–≤–µ—Ç —Ñ–æ–Ω–∞", correct: false },
    ]
  }
];

function shuffle(array) {
  return array.sort(() => Math.random() - 0.5);
}

questions = shuffle(questions);

let currentQuestion = 0;
let score = 0;
let timer;
let timeLeft = 30;
let alarmPlayed = false;

function showQuestion() {
  clearInterval(timer);
  document.body.style.animation = '';
  alarmPlayed = false;
  timeLeft = 30;
  updateTimer();

  const quiz = document.getElementById('quiz');
  quiz.innerHTML = '';

  if (currentQuestion >= questions.length) {
    endQuiz();
    return;
  }

  const q = questions[currentQuestion];
  const questionDiv = document.createElement('div');
  questionDiv.className = 'question';
  questionDiv.innerHTML = `<p><strong>–í–æ–ø—Ä–æ—Å:</strong> ${q.question}</p>`;

  const shuffledAnswers = shuffle(q.answers.slice());

  shuffledAnswers.forEach(answer => {
    const button = document.createElement('button');
    button.innerText = answer.text;
    button.onclick = () => checkAnswer(button, answer.correct);
    questionDiv.appendChild(button);
  });

  quiz.appendChild(questionDiv);

  document.getElementById('progress').innerText = `–í–æ–ø—Ä–æ—Å ${currentQuestion + 1} –∏–∑ ${questions.length}`;

  timer = setInterval(() => {
    timeLeft--;
    updateTimer();
    if (timeLeft <= 5 && !alarmPlayed) {
      document.getElementById('alarm').play();
      document.body.style.animation = 'blink 1s infinite';
      alarmPlayed = true;
    }
    if (timeLeft <= 0) {
      clearInterval(timer);
      penalty();
    }
  }, 1000);
}

function updateTimer() {
  const timerDiv = document.getElementById('timer');
  timerDiv.innerText = `–û—Å—Ç–∞–ª–æ—Å—å –≤—Ä–µ–º–µ–Ω–∏: ${timeLeft} —Å–µ–∫`;
  if (timeLeft > 20) {
    timerDiv.style.background = "#4CAF50";
  } else if (timeLeft > 5) {
    timerDiv.style.background = "#FFC107";
  } else {
    timerDiv.style.background = "#f44336";
  }
}

function checkAnswer(button, isCorrect) {
  clearInterval(timer);
  const buttons = document.querySelectorAll('button');
  buttons.forEach(btn => btn.disabled = true);

  if (isCorrect) {
    button.classList.add('correct');
    score += 10;
  } else {
    button.classList.add('wrong');
    score -= 5;
  }
  setTimeout(() => {
    currentQuestion++;
    showQuestion();
  }, 5000);
}

function penalty() {
  score -= 5;
  currentQuestion++;
  showQuestion();
}

function endQuiz() {
  document.getElementById('quiz').innerHTML = `<div id="result">–¢–µ—Å—Ç –∑–∞–≤–µ—Ä—à–µ–Ω!<br>–í–∞—à —Ä–µ–∑—É–ª—å—Ç–∞—Ç: ${score} –±–∞–ª–ª–æ–≤</div>`;
  document.getElementById('timer').style.display = "none";
  document.getElementById('progress').style.display = "none";

  if (score >= questions.length * 10 * 0.8) {
    startFireworks();
  } else if (score >= questions.length * 10 * 0.5) {
    document.getElementById('result').innerHTML += "<br>üëç –•–æ—Ä–æ—à–∞—è —Ä–∞–±–æ—Ç–∞!";
  } else {
    document.body.style.background = "#f44336";
  }
}

function startFireworks() {
  const canvas = document.getElementById('fireworks');
  const ctx = canvas.getContext('2d');
  resizeCanvas();

  window.addEventListener('resize', resizeCanvas);

  let particles = [];

  function resizeCanvas() {
    canvas.width = window.innerWidth;
    canvas.height = window.innerHeight;
  }

  function createParticle(x, y) {
    const particle = {
      x,
      y,
      speed: Math.random() * 5 + 2,
      angle: Math.random() * 2 * Math.PI,
      radius: Math.random() * 3 + 2,
      alpha: 1,
      color: `hsl(${Math.random() * 360}, 100%, 50%)`
    };
    particles.push(particle);
  }

  function updateParticles() {
    ctx.clearRect(0, 0, canvas.width, canvas.height);
    particles.forEach(p => {
      p.x += Math.cos(p.angle) * p.speed;
      p.y += Math.sin(p.angle) * p.speed;
      p.alpha -= 0.01;
    });
    particles = particles.filter(p => p.alpha > 0);
  }

  function drawParticles() {
    particles.forEach(p => {
      ctx.beginPath();
      ctx.arc(p.x, p.y, p.radius, 0, 2 * Math.PI);
      ctx.fillStyle = p.color;
      ctx.globalAlpha = p.alpha;
      ctx.fill();
    });
    ctx.globalAlpha = 1;
  }

  function loop() {
    updateParticles();
    drawParticles();
    requestAnimationFrame(loop);
  }

  setInterval(() => {
    const x = Math.random() * canvas.width;
    const y = Math.random() * canvas.height / 2;
    for (let i = 0; i < 30; i++) {
      createParticle(x, y);
    }
  }, 500);

  loop();
}

showQuestion();
</script>

</body>
</html>